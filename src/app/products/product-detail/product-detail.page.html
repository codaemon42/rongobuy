<ion-content [scrollEvents]="true">
  <ion-fab vertical="top" horizontal="end" slot="fixed">
    <ion-fab-button  color="danger" [routerLink]="['/carts']">
      <ion-icon name="cart"></ion-icon>
      <ion-badge class="cart-badge" color="warning">{{ totalCartQty }}</ion-badge>
    </ion-fab-button>
  </ion-fab>

  <ion-fab style="bottom: 60px" vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button color="light" (click)="addToWishlist()">
      <ion-icon [color]="wishlistColor ? 'danger' : 'medium'" name="heart"></ion-icon>
    </ion-fab-button>
  </ion-fab>
  <ion-grid class="fullscreen ion-no-padding">
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-back-button color="light" defaultHref="tabs/home"></ion-back-button>
      </ion-buttons>
    </ion-toolbar>

  <ion-grid *ngIf="singleProduct">
    <ion-row>
      <ion-col class="title-wrapper ion-text-center" size="12" style="z-index: 15; margin-top: -20px">
        <ion-text color="light" class="title ion-text-center">{{ singleProduct.title }}</ion-text>
      </ion-col>
    </ion-row>
    <ion-row class="upper-part">
      <ion-col size="2"></ion-col>
      <ion-col size="10">
        <ion-slides pager="true" [options]="slideOpts">
          <!-- <ion-slide *ngFor="let image of singleProduct.images"> -->
          <ion-slide>
            <img
              [ngStyle]="{
                'margin-top.px': 10,
                'border-radius.px': 10,
                'box-shadow': '0px 8px 8px rgba(4, 4, 4, 0.11)',
                'max-height.%': 90,
                'background-image': 'url('+backGroundImage+')',
                'background-size.%': 100,
                'background-repeat': 'no-repeat',
                'background-position-x.px': 0,
                'background-position-y.px': 0
              }"
             [src]="singleProduct.mainImage">
          </ion-slide>
          <!-- <ion-slide>

          </ion-slide> -->

        </ion-slides>
      </ion-col>
    </ion-row>
    <ion-row class="bottom-part">
      <ion-col size="6" style="height:min-content">
        <ion-chip *ngIf="selectedSKUProduct.discount" class="regular-price" color="primary" ><del>BDT {{selectedSKUProduct.price}}</del></ion-chip>
        <ion-chip class="regular-price" color="success" >BDT {{selectedSKUProduct.discountPrice}}</ion-chip>
        <ion-chip class="regular-price" color="success" >BDT {{selectedSKUProduct.SkuId}}</ion-chip>
      </ion-col>
      <ion-col size="6" class="ion-text-right ion-padding-right" style="height:min-content">
        <ion-chip color="success" class="stock">In stock</ion-chip>
        <div class="rating">
          <p-rating [(ngModel)]="singleProduct.review.avarage" [readonly]="true" [cancel]="false"></p-rating>
        </div>
      </ion-col>
      <ion-col>
        <div class="attr-container" *ngFor="let attr of singleProduct.skuModule.productSKUPropertyList; let attrIndex = index">
          <div class="attr-name">
            {{attr.skuPropertyName}}
          </div>
          <div
            (click)="getAttr(attrIndex, attrValIndex, attrValues.propertyValueId)"
            [ngClass]="{'activeBody': attrValues['active']}"
            class="attr-content"
            *ngFor="let attrValues of attr.skuPropertyValues; let attrValIndex = index">
            <!-- <div> propertyValueId: {{attrValues.propertyValueId}} </div>
            <div> propertyValueName: {{attrValues.propertyValueName}} </div> -->
              <ion-img

                style="width: 50px; height:50px; border: 1px solid rgba(51, 51, 51, 0.363); border-radius: 5px;"
                [src]="attrValues.skuPropertyImagePathSmall"></ion-img>
                <div class="attrValName">{{attrValues.propertyValueName}}</div>
          </div>
        </div>
        <!-- <ion-button (click)="genarateSKU(singleProduct.skuModule)">Gen sku</ion-button> -->
      </ion-col>
      <ion-col class="description">
        <ion-segment color="medium" value="description" (ionChange)="segmentChanged($event)">
          <ion-segment-button value="description">
            <ion-label>Description</ion-label>
          </ion-segment-button>
          <ion-segment-button value="reviews">
            <ion-label>Reviews</ion-label>
          </ion-segment-button>
        </ion-segment>
        <!-- review section -->
        <ion-grid *ngIf="segment === 'reviews'" >
          <ion-row>
            <ion-col size="12" *ngFor="let review of reviews">
              <div class="reviews">
                <div class="header">
                  <div class="name">
                    <ion-icon name="person"></ion-icon>{{ review.user_name }}
                  </div>
                  <div class="ratinng">
                    <p-rating [(ngModel)]="review.rating" [readonly]="true" [cancel]="false"></p-rating>
                  </div>
                </div>

                <div class="body">
                  <ion-text>
                    {{ review.review }}
                  </ion-text>
                </div>
              </div>
            </ion-col>
          </ion-row>
        </ion-grid>
        <ion-text *ngIf="segment === 'description'" color="medium">
          {{ singleProduct.description }}
        </ion-text>
      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-grid>
    <ion-row>
      <ion-col size="12" sizeSm="12" sizeMd="6">
        <iframe width="100%" height="315" src="https://www.youtube.com/embed/_aCeAMrh-wo" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
      </ion-col>
    </ion-row>
  </ion-grid>



  </ion-grid>

  <ion-grid class="ion-no-padding">
    <ion-row class="actions">
      <ion-col size="6">
          <ion-button [disabled]="disableCartButtons" color="warning" expand="full" class="buy-now" (click)="buyNow()">Buy Now</ion-button>
      </ion-col>
      <ion-col size="6">
          <div class="square"></div>
          <ion-button [disabled]="disableCartButtons" color="danger" expand="full" class="add-to-cart" (click)="addToCart()">Add to cart</ion-button>
      </ion-col>
    </ion-row>
  </ion-grid>

</ion-content>
